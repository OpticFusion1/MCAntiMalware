package optic_fusion1.mcantimalware.opennbt.conversion.builtin;

import optic_fusion1.mcantimalware.opennbt.conversion.ConverterRegistry;
import optic_fusion1.mcantimalware.opennbt.conversion.TagConverter;
import optic_fusion1.mcantimalware.opennbt.tag.builtin.ListTag;
import optic_fusion1.mcantimalware.opennbt.tag.builtin.Tag;

import java.util.ArrayList;
import java.util.List;

/**
 * A converter that converts between CompoundTag and Map.
 */
public class ListTagConverter implements TagConverter<ListTag, List> {

  @Override
  public List convert(ListTag tag) {
    List<Object> ret = new ArrayList<>();
    List<? extends Tag> tags = tag.getValue();
    tags.forEach(t -> {
      ret.add(ConverterRegistry.convertToValue(t));
    });
    return ret;
  }

  @Override
  public ListTag convert(String name, List value) {
    List<Tag> tags = new ArrayList<>();
    value.forEach(o -> {
      tags.add(ConverterRegistry.convertToTag("", o));
    });
    return new ListTag(name, tags);
  }
}
