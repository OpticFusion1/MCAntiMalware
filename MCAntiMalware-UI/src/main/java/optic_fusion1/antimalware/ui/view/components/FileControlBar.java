package optic_fusion1.antimalware.ui.view.components;

import javafx.beans.property.BooleanProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.HBox;
import optic_fusion1.antimalware.check.CheckResult;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;

public class FileControlBar extends HBox {

    private final BooleanProperty deletedProperty = new SimpleBooleanProperty(false);

    private final Label fileNameLabel = new Label();
    private final Button deleteButton = new Button();

    public FileControlBar(Path file, CheckResult checkResult) {

        fileNameLabel.setText(file.getFileName().toString());
        deleteButton.setText("Delete");

        deleteButton.setOnAction((event) -> {
            try {
                Files.delete(file);
                deletedProperty.set(true);
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        });

        getChildren().addAll(fileNameLabel, deleteButton);
    }

    public BooleanProperty deletedProperty() {
        return deletedProperty;
    }
}
